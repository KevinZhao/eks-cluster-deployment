apiVersion: v1
kind: Pod
metadata:
  name: test-graviton
  namespace: default
spec:
  # 容忍 Graviton NodePool 的 taint
  tolerations:
    - key: arch
      value: arm64
      effect: NoSchedule

  # 节点亲和性 - 确保调度到 Graviton 节点
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: node-type
                operator: In
                values:
                  - graviton

  containers:
    - name: test
      image: public.ecr.aws/docker/library/busybox:latest
      command:
        - sleep
        - "3600"
      resources:
        requests:
          cpu: "1"
          memory: "2Gi"
        limits:
          cpu: "2"
          memory: "4Gi"
